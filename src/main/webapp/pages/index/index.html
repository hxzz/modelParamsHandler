<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>首页</title>
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<!-- Bootstrap -->
<link href="../../css/bootstrap-3.3.5-dist/bootstrap.min.css" rel="stylesheet">
</head>
<body style="">
<div id="navigation" style="text-align: center;">
		<div id="top_btns" style="padding-right: 20px; text-align: right;">
			<span id="nickname"> <a href="javaScript:void(0);">昵称</a>
			</span> <span>|</span> <span id="message"> <a
				href="javaScript:void(0);">消息</a>
			</span> <span>|</span> <span id="myCenter"> <a
				href="javaScript:void(0);">个人中心</a>
			</span> <span>|</span> <span id="loginout"> <a
				href="javaScript:void(0);">登录</a>
			</span>
		</div>
</div>
<div id="div_model_area"></div> 

<!-- 模态框（Modal） -->
<div class="modal fade" id="modal_login"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog"  id="model_body_login">
		<div class="modal-content"  >
			<div class="modal-body" style="width:600px;height:300px;" >
				<iframe src="../login/login.html" style="height:100%;width:100%;border:none;"></iframe>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
</div>
<script src="../../jslibs/threejs/three.js"></script>
<script src="../../jslibs/threejs/Detector.js"></script>
<script src="../../jslibs/hxzz/HxzzTrackballControls.js"></script>
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	      <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	      <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
	    <![endif]-->
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="../../jslibs/jQuery-1.11.3/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../jslibs/bootstrap-3.3.5-dist/bootstrap.min.js"></script>

<script type="text/javascript">
var r=5;
var geometry = new THREE.SphereGeometry( r, 30, 30);
var textureLoader = new THREE.TextureLoader();

//var flowerTexture = textureLoader.load( '../resources/images/荷花.jpg' );

function createTexture(text,backgroundColors,textColors){
	var canvas=document.createElement("canvas");
	var context = canvas.getContext( '2d' );
	var height=canvas.height ,width=canvas.width;
	var gradient = context.createRadialGradient( width / 2, height / 2, 0, width / 2, height / 2, width / 2 );
/* 	gradient.addColorStop( 0.1, 'rgba(132,125,181,1)' );
	gradient.addColorStop( 1, 'rgba(234,45,135,1)' ); */
	gradient.addColorStop( 0.1, 'rgba(110,210,210,1)' );
	gradient.addColorStop( 1, 'rgba(155,255,255,1)' );
	context.fillStyle = gradient;
	context.fillRect( 0, 0, width, height );
	
	context.font="30px Verdana";
	// Create gradient
	var gradient=context.createLinearGradient(0,0,width,0);
	gradient.addColorStop("0","magenta");
	gradient.addColorStop("0.5","blue");
	gradient.addColorStop("1.0","red");
	// Fill with gradient
	context.fillStyle=gradient;
	context.fillText(text,0,height/2);
	
	context.fillText(text,width/3,height/2);
	context.fillText(text,width/3* 2,height/2);
	
	return new THREE.CanvasTexture( canvas );
}

var material=new THREE.MeshPhongMaterial( { 
      				color: 0xffffff, 
      				shading: THREE.FlatShading,
      				vertexColors: THREE.VertexColors,
      				shininess: 0 
      				} 
      			);
      			
var scene= new THREE.Scene();
//var sphere = THREE.SceneUtils.createMultiMaterialObject( geometry, materials );
var len=4*r;
var y_offset=-5;
var group =new THREE.Group();

//案例
material=material.clone();
material.map=createTexture("案例");
var sphere = new THREE.Mesh( geometry, material);
sphere.position.set(0,Math.sqrt(6)/3*len+y_offset,0);
sphere.addEventListener("click",function(){
	window.location.href="../designcenter/designcenter.html?id=000000001";
},false);
group.add( sphere );

//模型库
material=material.clone();
material.map=createTexture("模型库");
sphere = new THREE.Mesh( geometry,material);
sphere.position.set(-0.5*len,y_offset,-Math.sqrt(3)/6*len);
sphere.addEventListener("click",function(){
	window.location.href="../modelsCenter/modelsCenter.html";
},false);
group.add( sphere );

//论坛
material=material.clone();
material.map=createTexture("论坛");
sphere = new THREE.Mesh( geometry, material);
sphere.position.set(0.5*len,y_offset,-Math.sqrt(3)/6*len);
group.add( sphere );

//设计
material=material.clone();
material.map=createTexture("设计");
sphere = new THREE.Mesh( geometry, material);
sphere.position.set(0,y_offset,Math.sqrt(3)/3*len);
sphere.addEventListener("click",function(){
	window.location.href="../designcenter/designcenter.html";
},false);
group.add( sphere ); 
scene.add(group);



//雾气效果
//scene.fog = new THREE.FogExp2( 0xFFFFFF,0.0011 ); 

scene.fog = new THREE.Fog( 0x000000, 100, 600 );

var light = new THREE.DirectionalLight( 0x324aaf );
light.position.set( 15, 15, 23 ).normalize();
scene.add( light );


light=new THREE.AmbientLight( 0xFFFFFF,0.7 ); // soft white light
scene.add( light );
 
var camera=new THREE.PerspectiveCamera( 20, window.innerWidth / window.innerHeight, 1, 10000 );

//正面
camera.position.x=0;
camera.position.y=30;
camera.position.z=130; 

var renderer= new THREE.WebGLRenderer( { antialias: true } );
renderer.setSize(window.innerWidth*0.95,window.innerHeight*0.95);
renderer.sortObjects = false;
renderer.setPixelRatio( window.devicePixelRatio );
renderer.setClearColor( 0xFFFFFF );
//renderer.setClearColor( 0x000000 );

document.getElementById("div_model_area").appendChild(renderer.domElement);

function onclick(){
	//alert("选择的球的uuid="+this.uuid);
}

function onmouseout(){
	this.material.emissive.setHex( this.currentHex );
}

function onmouseover(){

	this.currentHex = this.material.emissive.getHex();
	this.material.emissive.setHex( 0xff0000 );

}

for(var i=0;i<group.children.length;i++){
	group.children[i].addEventListener("mouseover",onmouseover,false);
	group.children[i].addEventListener("click",onclick,false);
	group.children[i].addEventListener("mouseout",onmouseout,false);
}
controls = new THREE.HxzzTrackballControls({
	domElement:document.getElementById("div_model_area"),
	camera:camera,
	target:group.position,
	rotateSpeed:1.0,
	enableAutoRotate:true,
	enableRaycaster:true,
	raycastTarget:group,
	autoRotateSpeed:0.05,
	enableClick:true,
	enableMouseover:true,
	enableMouseout:true
});


function animate(){
	//render();
	var balls=group.children;
	for(var i=0;i<balls.length;i++){
		var ball=balls[i];
		ball.rotateY(0.025);	
	}
	controls.update();
	renderer.render( scene, camera );
	requestAnimationFrame( animate ); 
}

 function onWindowResize() {
	renderer.setSize( window.innerWidth*0.95,window.innerHeight*0.95 );
	camera.aspect=window.innerWidth/window.innerHeight; 
	controls.handleResize();
	camera.lookAt( scene.position );
	camera.updateProjectionMatrix ()
	renderer.render( scene, camera );

}
 
function render(){
	camera.lookAt( group.position );
	
}
 
//controls.addEventListener("change",render,false);
window.addEventListener( 'resize', onWindowResize, false );
 
 
animate();

function createTag(tagName,attrs,text){
	if(!tagName&&!text){
		return;
	}else if(!tagName&&text){
		return  document.createTextNode(text);
	}
	
	var tag=document.createElement(tagName);
	if(attrs){
		for(key in attrs){
			tag.setAttribute(key, attrs[key]);
		}
	}
	
	if(text){
		tag.appendChild(document.createTextNode(text));
	}
	
	return tag;
}


//模态框

$("#loginout").on("click",function(){
	$("#model_body_login").css("margin-top","300px");
	if($.trim($("#loginout").text())=="登录"){
		$('#modal_login').modal({
		    keyboard: true,
		});
	}else{
		
	}
});
</script>

</body>
</html>